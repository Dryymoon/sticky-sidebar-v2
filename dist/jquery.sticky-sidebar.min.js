/**
 * sticky-sidebar-v2 - A JavaScript plugin for making smart and high performance sticky sidebars.
 * @version v1.1.0
 * @link https://github.com/blixhavn/sticky-sidebar-v2
 * @author Ã˜ystein Blixhavn
 * @license The MIT License (MIT)
**/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).StickySidebar=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i=t(function(e,t){!function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:true});var t=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(e,t,i){if(t)n(e.prototype,t);if(i)n(e,i);return e}}(),i=function(){var h=".stickySidebar";var n={topSpacing:0,bottomSpacing:0,containerSelector:false,scrollContainer:false,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",minWidth:false};var e=function(){function d(e){var t=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};r(this,d);this.options=d.extend(n,i);this.sidebar="string"===typeof e?document.querySelector(e):e;if("undefined"===typeof this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=false;this.container=this.sidebar.parentElement;this.affixedType="STATIC";this.direction="down";this.support={transform:false,transform3d:false};this._initialized=false;this._reStyle=false;this._breakpoint=false;this.dimensions={translateY:0,maxTranslateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0};["handleEvent"].forEach(function(e){t[e]=t[e].bind(t)});this.initialize()}t(d,[{key:"initialize",value:function e(){var i=this;this._setSupportFeatures();if(this.options.innerWrapperSelector){this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector);if(null===this.sidebarInner)this.sidebarInner=false}if(!this.sidebarInner){var t=document.createElement("div");t.setAttribute("class","inner-wrapper-sticky");this.sidebar.appendChild(t);while(this.sidebar.firstChild!=t)t.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var n=document.querySelectorAll(this.options.containerSelector);n=Array.prototype.slice.call(n);n.forEach(function(e,t){if(!e.contains(i.sidebar))return;i.container=e});if(!n.length)throw new Error("The container does not contains on the sidebar.")}this.scrollContainer=this.options.scrollContainer?document.querySelector(this.options.scrollContainer):undefined;if("function"!==typeof this.options.topSpacing)this.options.topSpacing=parseInt(this.options.topSpacing)||0;if("function"!==typeof this.options.bottomSpacing)this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0;this._widthBreakpoint();this.calcDimensions();this.stickyPosition();this.bindEvents();this._initialized=true}},{key:"bindEvents",value:function e(){var t=this;this.eventTarget=this.scrollContainer?this.scrollContainer:window;this.eventTarget.addEventListener("resize",this,{passive:true,capture:false});this.eventTarget.addEventListener("scroll",this,{passive:true,capture:false});this.sidebar.addEventListener("update"+h,this);if("undefined"!==typeof ResizeObserver){var i=new ResizeObserver(function(){return t.handleEvent()});i.observe(this.sidebarInner);i.observe(this.container)}}},{key:"handleEvent",value:function e(t){this.updateSticky(t)}},{key:"calcDimensions",value:function e(){if(this._breakpoint)return;var t=this.dimensions;t.containerTop=d.offsetRelative(this.container).top;t.containerHeight=this.container.clientHeight;t.containerBottom=t.containerTop+t.containerHeight;t.sidebarHeight=this.sidebarInner.offsetHeight;t.sidebarWidth=this.sidebarInner.offsetWidth;t.viewportHeight=window.innerHeight;t.maxTranslateY=t.containerHeight-t.sidebarHeight;this._calcDimensionsWithScroll()}},{key:"_calcDimensionsWithScroll",value:function e(){var t=this.dimensions;t.sidebarLeft=d.offsetRelative(this.sidebar).left;if(this.scrollContainer){t.viewportTop=this.scrollContainer.scrollTop;t.viewportLeft=this.scrollContainer.scrollLeft}else{t.viewportTop=document.documentElement.scrollTop||document.body.scrollTop;t.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft}t.viewportBottom=t.viewportTop+t.viewportHeight;t.topSpacing=this.options.topSpacing;t.bottomSpacing=this.options.bottomSpacing;if("function"===typeof t.topSpacing)t.topSpacing=parseInt(t.topSpacing(this.sidebar))||0;if("function"===typeof t.bottomSpacing)t.bottomSpacing=parseInt(t.bottomSpacing(this.sidebar))||0;if("VIEWPORT-TOP"===this.affixedType){if(t.topSpacing<t.lastTopSpacing){t.translateY+=t.lastTopSpacing-t.topSpacing;this._reStyle=true}}else if("VIEWPORT-BOTTOM"===this.affixedType)if(t.bottomSpacing<t.lastBottomSpacing){t.translateY+=t.lastBottomSpacing-t.bottomSpacing;this._reStyle=true}t.lastTopSpacing=t.topSpacing;t.lastBottomSpacing=t.bottomSpacing}},{key:"isSidebarFitsViewport",value:function e(){return this.dimensions.viewportHeight>=this.dimensions.lastBottomSpacing+this.dimensions.lastTopSpacing+this.dimensions.sidebarHeight}},{key:"observeScrollDir",value:function e(){var t=this.dimensions;if(t.lastViewportTop===t.viewportTop)return;var i="down"===this.direction?Math.min:Math.max;if(t.viewportTop===i(t.viewportTop,t.lastViewportTop))this.direction="down"===this.direction?"up":"down"}},{key:"getAffixType",value:function e(){this._calcDimensionsWithScroll();var t=this.dimensions;var i=t.viewportTop+t.topSpacing;var n=this.affixedType;if(i<=t.containerTop||t.containerHeight<=t.sidebarHeight){t.translateY=0;n="STATIC"}else n="up"===this.direction?this._getAffixTypeScrollingUp():this._getAffixTypeScrollingDown();t.translateY=Math.max(0,t.translateY);t.translateY=Math.min(t.containerHeight,t.translateY);t.translateY=Math.round(t.translateY);t.lastViewportTop=t.viewportTop;return n}},{key:"_getAffixTypeScrollingDown",value:function e(){var t=this.dimensions;var i=t.sidebarHeight+t.containerTop;var n=t.viewportTop+t.topSpacing;var r=t.viewportBottom-t.bottomSpacing;var s=this.affixedType;if(this.isSidebarFitsViewport()){if(t.sidebarHeight+n>=t.containerBottom){t.translateY=t.containerBottom-i;s="CONTAINER-BOTTOM"}else if(n>=t.containerTop){t.translateY=n-t.containerTop;s="VIEWPORT-TOP"}}else if(t.containerBottom<=r){t.translateY=t.containerBottom-i;s="CONTAINER-BOTTOM"}else if(i+t.translateY<=r){t.translateY=r-i;s="VIEWPORT-BOTTOM"}else if(t.containerTop+t.translateY<=n&&0!==t.translateY&&t.maxTranslateY!==t.translateY)s="VIEWPORT-UNBOTTOM";return s}},{key:"_getAffixTypeScrollingUp",value:function e(){var t=this.dimensions;var i=t.sidebarHeight+t.containerTop;var n=t.viewportTop+t.topSpacing;var r=t.viewportBottom-t.bottomSpacing;var s=this.affixedType;if(n<=t.translateY+t.containerTop){t.translateY=n-t.containerTop;s="VIEWPORT-TOP"}else if(t.containerBottom<=r){t.translateY=t.containerBottom-i;s="CONTAINER-BOTTOM"}else if(!this.isSidebarFitsViewport())if(t.containerTop<=n&&0!==t.translateY&&t.maxTranslateY!==t.translateY)s="VIEWPORT-UNBOTTOM";return s}},{key:"_getStyle",value:function e(t){if("undefined"===typeof t)return;var i={inner:{},outer:{}};var n=this.dimensions;switch(t){case"VIEWPORT-TOP":i.inner={position:"fixed",top:n.topSpacing,left:n.sidebarLeft-n.viewportLeft,width:n.sidebarWidth};break;case"VIEWPORT-BOTTOM":i.inner={position:"fixed",top:"auto",left:n.sidebarLeft,bottom:n.bottomSpacing,width:n.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var r=this._getTranslate(0,n.translateY+"px");if(r)i.inner={transform:r};else i.inner={position:"absolute",top:n.translateY,width:n.sidebarWidth};break}switch(t){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":i.outer={height:n.sidebarHeight,position:"relative"};break}i.outer=d.extend({height:"",position:""},i.outer);i.inner=d.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:""},i.inner);return i}},{key:"stickyPosition",value:function e(t){if(this._breakpoint)return;t=this._reStyle||t||false;var i=this.options.topSpacing;var n=this.options.bottomSpacing;var r=this.getAffixType();var s=this._getStyle(r);if((this.affixedType!=r||t)&&r){var o="affix."+r.toLowerCase().replace("viewport-","")+h;d.eventTrigger(this.sidebar,o);if("STATIC"===r)d.removeClass(this.sidebar,this.options.stickyClass);else d.addClass(this.sidebar,this.options.stickyClass);for(var a in s.outer){var l="number"===typeof s.outer[a]?"px":"";this.sidebar.style[a]=s.outer[a]+l}for(var p in s.inner){var c="number"===typeof s.inner[p]?"px":"";this.sidebarInner.style[p]=s.inner[p]+c}var f="affixed."+r.toLowerCase().replace("viewport-","")+h;d.eventTrigger(this.sidebar,f)}else if(this._initialized)this.sidebarInner.style.left=s.inner.left;this.affixedType=r}},{key:"_widthBreakpoint",value:function e(){if(window.innerWidth<=this.options.minWidth){this._breakpoint=true;this.affixedType="STATIC";this.sidebar.removeAttribute("style");d.removeClass(this.sidebar,this.options.stickyClass);this.sidebarInner.removeAttribute("style")}else this._breakpoint=false}},{key:"updateSticky",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this._running)return;this._running=true;(function(e){requestAnimationFrame(function(){switch(e){case"scroll":t._calcDimensionsWithScroll();t.observeScrollDir();t.stickyPosition();break;case"resize":default:t._widthBreakpoint();t.calcDimensions();t.stickyPosition(true);break}t._running=false})})(i.type)}},{key:"_setSupportFeatures",value:function e(){var t=this.support;t.transform=d.supportTransform();t.transform3d=d.supportTransform(true)}},{key:"_getTranslate",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(this.support.transform3d)return"translate3d("+t+", "+i+", "+n+")";else if(this.support.translate)return"translate("+t+", "+i+")";else return false}},{key:"destroy",value:function e(){window.removeEventListener("resize",this,{capture:false});window.removeEventListener("scroll",this,{capture:false});this.sidebar.classList.remove(this.options.stickyClass);this.sidebar.style.minHeight="";this.sidebar.removeEventListener("update"+h,this);var t={inner:{},outer:{}};t.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""};t.outer={height:"",position:""};for(var i in t.outer)this.sidebar.style[i]=t.outer[i];for(var n in t.inner)this.sidebarInner.style[n]=t.inner[n];if(this.options.resizeSensor&&"undefined"!==typeof ResizeSensor){ResizeSensor.detach(this.sidebarInner,this.handleEvent);ResizeSensor.detach(this.container,this.handleEvent)}}}],[{key:"supportTransform",value:function e(t){var i=false,n=t?"perspective":"transform",r=n.charAt(0).toUpperCase()+n.slice(1),s=["Webkit","Moz","O","ms"],o=document.createElement("support"),a=o.style;(n+" "+s.join(r+" ")+r).split(" ").forEach(function(e,t){if(a[e]!==undefined){i=e;return false}});return i}},{key:"eventTrigger",value:function e(t,i,n){try{var r=new CustomEvent(i,{detail:n})}catch(e){var r=document.createEvent("CustomEvent");r.initCustomEvent(i,true,true,n)}t.dispatchEvent(r)}},{key:"extend",value:function e(t,i){var n={};for(var r in t)if("undefined"!==typeof i[r])n[r]=i[r];else n[r]=t[r];return n}},{key:"offsetRelative",value:function e(t){var i={left:0,top:0};do{var n=t.offsetTop;var r=t.offsetLeft;if(!isNaN(n))i.top+=n;if(!isNaN(r))i.left+=r;t="BODY"===t.tagName?t.parentElement:t.offsetParent}while(t);return i}},{key:"addClass",value:function e(t,i){if(!d.hasClass(t,i))if(t.classList)t.classList.add(i);else t.className+=" "+i}},{key:"removeClass",value:function e(t,i){if(d.hasClass(t,i))if(t.classList)t.classList.remove(i);else t.className=t.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," ")}},{key:"hasClass",value:function e(t,i){if(t.classList)return t.classList.contains(i);else return new RegExp("(^| )"+i+"( |$)","gi").test(t.className)}},{key:"defaults",get:function(){return n}}]);return d}();return e}();e.default=i,window.StickySidebar=i}(t)}),n=e(i),i=Object.freeze({default:n,__moduleExports:i}),r=i&&n||i;return e(t(function(e,t){var s;s=function(e){return e&&e.__esModule?e:{default:e}}(r),function(){var n,r,e;"undefined"!=typeof window&&(r="stickySidebar",(n=window.$||window.jQuery||window.Zepto)&&(n.fn.stickySidebar=function(i){return this.each(function(){var e=n(this),t=n(this).data(r);if(t||(t=new s.default(this,"object"==typeof i&&i),e.data(r,t)),"string"==typeof i){if(void 0===t[i]&&-1===["destroy","updateSticky"].indexOf(i))throw new Error('No method named "'+i+'"');t[i]()}})},n.fn.stickySidebar.Constructor=s.default,e=n.fn.stickySidebar,n.fn.stickySidebar.noConflict=function(){return n.fn.stickySidebar=e,this}))}()}))});